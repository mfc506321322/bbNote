# 堆栈

## 什么是堆栈

1. 栈：**栈申请内存时是由系统自动分配的**，

   而且系统分配也是有大小限制的，只要栈的剩余空间大于所申请空间，系统将为程序提供内存，否则将报异常提示栈溢出。

2. 堆：**堆内存是一般是由语言运行环境分配管理**

   首先应该知道操作系统有一个记录空闲内存地址的链表，当系统收到程序的申请时，会遍历该链表，寻找第一个空间大于所申请空间的堆结点，然后将该结点从空闲结点链表中删除，并将该结点的空间分配给程序，另外，对于大多数系统，会在这块内 存空间中的首地址处记录本次分配的大小，这样，代码中的delete语句才能正确的释放本内存空间。另外，由于找到的堆结点的大小不一定正好等于申请的大 小，系统会自动的将多余的那部分重新放入空闲链表中。

![](/Users/binbinwang/workspace/bbNote/image/heap and stack.jpg)

## 堆（heap）和栈的（stack）区别

1. 内存申请区别

   

2. 在哪找

​		栈：

​		堆：推是在链表上面去找，找到合适的就把推放上去

3. 查找方式

   栈：自顶向下分配，空间限制

   推：从下往上分配，空间无限

4. 速度

​		栈：分配内存快

​		推：分配内存慢